import{j as e,F as V,z as ae,A as se,B as F,t as q,r as l,h as E,M as b,G as ne,S as W}from"./index-CvlbEJeI.js";import{C as Q}from"./card-B8MTU1gV.js";import{t as j,P as G,G as le,a as ce,b as de,c as Z,d as i,F as L,e as ie,B as ge,D as be,M as H,f as ue,g as pe,C as he,U as me,h as xe,S as je,i as ye,j as fe,R as ve,k as we}from"./database-technology-type-Ds5CqdO4.js";const Ce="rgb(255, 255, 255)",Pe="rgb(0, 0, 0)",ke="rgb(204, 204, 204)",Ne="rgb(199, 23, 23)",Se="rgb(254, 131, 0)",$e="rgb(0, 128, 0)",Me="0",ze="900",Oe="1000",Ie="1005",Ae="1030",De="1035",Be="1040",Te="1050",_e="1100",Fe="1200",Ee="1500",Re="950",Ge="_project_w7wz1_119",Le="_addActionGroup_w7wz1_125",Ue="_tableGridResponsive_w7wz1_180",Ve="_stretchCard_w7wz1_187",We="_fullRow_w7wz1_196",R={white:Ce,black:Pe,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:ke,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:Ne,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:Se,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:$e,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:Me,zBackground:ze,zPopover:Oe,zAgentNotes:Ie,zPaymentPanelOverlay:Ae,zStoreMessagingDisclaimer:De,zModalBackground:Be,zModal:Te,zTooltip:_e,zSpinner:Fe,zBanner:Ee,zComponentSpinner:Re,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',project:Ge,addActionGroup:Le,"is-active":"_is-active_w7wz1_173",tableGridResponsive:Ue,stretchCard:Ve,fullRow:We},qe="rgb(255, 255, 255)",He="rgb(0, 0, 0)",Je="rgb(204, 204, 204)",Ke="rgb(199, 23, 23)",Qe="rgb(254, 131, 0)",Xe="rgb(0, 128, 0)",Ye="0",Ze="900",et="1000",tt="1005",rt="1030",ot="1035",at="1040",st="1050",nt="1100",lt="1200",ct="1500",dt="950",it="_tableBody_6k9lv_119",gt="_projectGrid_6k9lv_126",bt="_theadLabel_6k9lv_126",ut="_theadBottom_6k9lv_130",U={white:qe,black:He,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:Je,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:Ke,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:Qe,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:Xe,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:Ye,zBackground:Ze,zPopover:et,zAgentNotes:tt,zPaymentPanelOverlay:rt,zStoreMessagingDisclaimer:ot,zModalBackground:at,zModal:st,zTooltip:nt,zSpinner:lt,zBanner:ct,zComponentSpinner:dt,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',tableBody:it,projectGrid:gt,theadLabel:bt,theadBottom:ut},_=({row:t,children:o,handleOnDrawerOpen:p})=>e.jsx("div",{className:j.table,children:e.jsx("div",{className:j.row,children:e.jsx("div",{tabIndex:0,className:j.heading,onClick:()=>{p&&p(t)},"data-qa":"project-grid-row",children:o})},t.id)}),pt=({value:t,style:o})=>e.jsx("div",{className:`${j.column}`,style:o,children:e.jsx("div",{className:j.content,children:e.jsx("span",{children:t})})}),ht=({style:t,children:o})=>e.jsx("div",{className:`${j.column}`,style:t,children:e.jsx("div",{className:j.content,children:o})}),mt=({onEdit:t,onDelete:o})=>e.jsx("div",{className:j.actions,style:{width:100},children:e.jsxs("div",{className:j.actionsInnerContainer,children:[e.jsx(V,{icon:ae,style:{padding:"0.125rem"},onClick:t}),e.jsx(V,{icon:se,style:{padding:"0.125rem"},onClick:o})]})});_.Row=pt;_.CustomRowValue=ht;_.Actions=mt;const xt=t=>{switch(t){case G.Completed:return F.activeRounded;case G.InProgress:return F.inProgressRounded;case G.Pending:return F.warningRounded;case G.Fixed:return F.upcomingRounded;default:return F.inactiveRounded}},jt=()=>{const t=(h,c)=>{const n=h[c];return["developers","frontendTecnology","databases"].includes(c)?q.replacePipeToNewHtmlLine(n).map((u,g)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:u})},`${u}-${g}`)):""},o=(h,c)=>{const n=h[c];return["backendTecnology"].includes(c)?q.replacePeriodToNewHtmlLine(n).map((u,g)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:u})},`${u}-${g}`)):""},p=(h,c)=>{const n=h[c];return["ci","cd"].includes(c)?e.jsx("span",{className:`${j.status}`,children:e.jsx(V,{className:`${j[le(n)]}`,icon:ce(n)})}):""},m=(h,c)=>{const n=h[c];return["deployCount","errorsCount","reportNc","warningCount","percentageCompletion"].includes(c)?e.jsx("div",{className:j.status,style:{width:"auto"},children:e.jsx("span",{className:`${j[de(c)]}`,children:c==="percentageCompletion"?q.percentageUnit(n,1):n})}):""};return{headers:[{name:"projectName",label:"proyecto",isSortable:!0,style:{minWidth:"230px"}},{name:"client",label:"cliente",style:{minWidth:"280px"}},{name:"repoUrl",label:"repositorio",style:{minWidth:"170px"}},{name:"developers",label:"desarrolladores",style:{minWidth:"230px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},rowFormatter:t},{name:"ci",label:"ci",style:{minWidth:"40px",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},rowFormatter:p},{name:"cd",label:"cd",style:{minWidth:"50px",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},rowFormatter:p},{name:"frontendTecnology",label:"frontend",style:{minWidth:"150px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",textAlign:"left"},rowFormatter:t},{name:"backendTecnology",label:"backend",style:{minWidth:"150px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},rowFormatter:o},{name:"databases",label:"db",style:{minWidth:"150px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},rowFormatter:t},{name:"warningCount",label:"alertas",style:{minWidth:"60px",textAlign:"center"},rowFormatter:m},{name:"errorsCount",label:"errores",style:{minWidth:"60px",textAlign:"center"},rowFormatter:m},{name:"deployCount",label:"cant. despliegues",style:{minWidth:"120px",textAlign:"center"},rowFormatter:m},{name:"percentageCompletion",label:"avance",style:{minWidth:"60px",textAlign:"center"},rowFormatter:m},{name:"reportNc",label:"reporte NC's",style:{minWidth:"100px",textAlign:"center"},rowFormatter:m},{name:"status",label:"status",style:{minWidth:"120px"},rowFormatter:(h,c)=>{const n=h[c];return"status".includes(c)?e.jsx("span",{className:`${[xt(Z(n))]}`,style:{textTransform:"capitalize",color:"black",fontWeight:"normal"},children:n}):""}}]}},yt="_modalForm_vikxx_1",ft={modalForm:yt},vt="_row_1l204_1",wt="_modalFormFooter_1l204_5",M={row:vt,modalFormFooter:wt},T={projectName:t=>{const o=[];return t||o.push("Project name is required"),t.length>50&&o.push("Project Name limited to 50 characters"),o},client:t=>{const o=[];return t||o.push("Client is required"),t.length>50&&o.push("Client limited to 50 characters"),o},repository:t=>{const o=[];return t||o.push("Repository is required"),t.length>50&&o.push("Repository limited to 50 characters"),o},developers:t=>{const o=[];return t||o.push("Developers are required"),o},frontend:t=>{const o=[];return t||o.push("Frontend technology is required"),o},backend:t=>{const o=[];return t||o.push("Backend technology is required"),o},database:t=>{const o=[];return t||o.push("Database technology is required"),o}},Ct=(t,o,p,m,f)=>{const{projectName:C,client:h,repoUrl:c}=t,[n,u]=l.useState({}),[g,N]=l.useState(!1);return l.useEffect(()=>{let I=!1;const y={},z=T.projectName(C),S=T.client(h),A=T.repository(c),D=T.developers(f),B=T.frontend(o),$=T.backend(p),P=T.database(m);I||(I=!!z.length||!!S.length||!!A.length||!!D.length||!!B.length||!!$.length||!!P.length),y.projectName=z,y.client=S,y.repository=A,y.developers=D,y.frontend=B,y.backend=$,y.database=P,u(y),N(I)},[p,h,m,f,o,C,c]),[g,n]},Pt=({projectFields:t,tecnologiesFields:o,developersFields:p,onProjectFormChange:m,onSubmit:f,onClose:C,onFrontendChange:h,onDatabaseChange:c,onBackendChange:n,onDeveloperChange:u})=>{const g=l.useId(),[N,I]=l.useState(!1),[y,z]=l.useState(!1),[S,A]=l.useState(!1),[D,B]=l.useState(!1),[$,P]=l.useState(),[d,k]=l.useState(!1),a=l.useMemo(()=>{var r;return(r=o.backend)==null?void 0:r.join(", ")},[o.backend]),x=l.useMemo(()=>{var r;return(r=o.frontend)==null?void 0:r.join(", ")},[o.frontend]),s=l.useMemo(()=>{var r;return(r=o.database)==null?void 0:r.join(", ")},[o.database]),v=l.useMemo(()=>p==null?void 0:p.join(", "),[p]),[O,w]=Ct(t,x,a,s,v);l.useEffect(()=>{(async()=>{const oe=await ne();P(oe.map(K=>`${K.name} ${K.lastName}`))})()},[]);const re=async()=>{k(!0),await f(!O,{projectFormFields:{...t,developers:v,frontend:x,backend:a,database:s}}),J()},J=()=>{C(),k(!1)};return e.jsxs("form",{noValidate:!0,autoComplete:"off",className:M.modalForm,onSubmit:r=>{r.preventDefault()},children:[e.jsx("div",{className:M.row,children:e.jsx(E.Input,{id:`${g}-project-name`,type:"text",label:b.AddProjectModalFormProject,value:t.projectName,onChange:r=>m("projectName",r.target.value),errors:w.projectName,showErrors:d})}),e.jsx("div",{className:M.row,children:e.jsx(E.Input,{id:`${g}-client`,type:"text",label:b.AddProjectModalFormClient,value:t.client,onChange:r=>m("client",r.target.value),errors:w.client,showErrors:d})}),e.jsx("div",{className:M.row,children:e.jsx(E.Input,{id:`${g}-repository`,type:"text",label:b.AddProjectModalFormRepository,value:t.repoUrl,placeholder:"https://",onChange:r=>m("repoUrl",r.target.value),errors:w.repository,showErrors:d})}),e.jsx("div",{className:M.row,children:e.jsx(E.CheckInput,{id:`${g}-ci`,type:"checkbox",label:b.AddProjectModalFormCI,checked:t.ci==="true",onChange:r=>m("ci",`${r.target.checked}`)})}),e.jsx("div",{className:M.row,children:e.jsx(E.CheckInput,{id:`${g}-cd`,type:"checkbox",label:b.AddProjectModalFormCD,checked:t.cd==="true",onChange:r=>m("cd",`${r.target.checked}`)})}),e.jsxs("div",{className:M.row,children:[e.jsx("div",{"aria-labelledby":"developers-multiple-checkbox-label",className:i.dropdownLabel,children:b.AddProjectModalFormDevelopers}),e.jsx(L,{id:`${g}-developers`,open:D,onClose:()=>B(!1),onTogglePopover:()=>B(r=>!r),value:v,errors:w.developers,showErrors:d,testId:"developers-select",placeholder:b.ProjectModalFormDeveloperPlaceholder,children:e.jsx("div",{className:i.dropdown,role:"combobox","aria-expanded":y,"aria-haspopup":"listbox",id:`${g}-developers-multiple-checkbox`,children:e.jsxs("ul",{className:i.dropdownOptions,children:[e.jsx("li",{className:`${i.dropdownOption} ${i.disabled}`,tabIndex:0,"data-value":b.ProjectModalFormDeveloperPlaceholder,role:"option",children:e.jsx("em",{children:b.ProjectModalFormDeveloperPlaceholder})}),$==null?void 0:$.map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":v.indexOf(r)>-1,className:`${i.dropdownOption} ${v.indexOf(r)>-1?i.selected:""}`,onClick:()=>u(r),children:r},r))]})})})]}),e.jsxs("div",{className:M.row,children:[e.jsx("div",{"aria-labelledby":"frontend-multiple-checkbox-label",className:i.dropdownLabel,children:b.AddProjectModalFormFrontend}),e.jsx(L,{id:`${g}-frontend`,open:y,onClose:()=>z(!1),onTogglePopover:()=>z(r=>!r),value:x,errors:w.frontend,showErrors:d,testId:"frontend-select",placeholder:b.ProjectModalFormFrontendPlaceholder,children:e.jsx("div",{className:i.dropdown,role:"combobox","aria-expanded":y,"aria-haspopup":"listbox",id:`${g}-frontend-multiple-checkbox`,children:e.jsxs("ul",{className:i.dropdownOptions,children:[e.jsx("li",{className:`${i.dropdownOption} ${i.disabled}`,tabIndex:0,"data-value":b.ProjectModalFormFrontendPlaceholder,role:"option",children:e.jsx("em",{children:b.ProjectModalFormFrontendPlaceholder})}),Object.values(ie).map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":x.indexOf(r)>-1,className:`${i.dropdownOption} ${x.indexOf(r)>-1?i.selected:""}`,onClick:()=>h(r),children:r},r))]})})})]}),e.jsxs("div",{className:M.row,children:[e.jsx("div",{"aria-labelledby":"backend-multiple-checkbox-label",className:i.dropdownLabel,children:b.AddProjectModalFormBackend}),e.jsx(L,{id:`${g}-backend`,open:N,onClose:()=>I(!1),onTogglePopover:()=>I(r=>!r),value:a,errors:w.backend,showErrors:d,testId:"backend-select",placeholder:b.ProjectModalFormBackendPlaceholder,children:e.jsx("div",{className:i.dropdown,role:"combobox","aria-expanded":N,"aria-haspopup":"listbox",id:`${g}-backend-multiple-checkbox`,children:e.jsxs("ul",{className:i.dropdownOptions,children:[e.jsx("li",{className:`${i.dropdownOption} ${i.disabled}`,tabIndex:0,"data-value":b.ProjectModalFormBackendPlaceholder,role:"option",children:e.jsx("em",{children:b.ProjectModalFormBackendPlaceholder})}),Object.values(ge).map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":a.indexOf(r)>-1,className:`${i.dropdownOption} ${a.indexOf(r)>-1?i.selected:""}`,onClick:()=>n(r),children:r},r))]})})})]}),e.jsxs("div",{className:M.row,children:[e.jsx("div",{"aria-labelledby":"database-multiple-checkbox-label",className:i.dropdownLabel,children:b.AddProjectModalFormDatabases}),e.jsx(L,{id:`${g}-database`,open:S,onClose:()=>A(!1),onTogglePopover:()=>A(r=>!r),value:s,errors:w.database,showErrors:d,testId:"database-select",placeholder:b.ProjectModalFormDatabasePlaceholder,children:e.jsx("div",{className:i.dropdown,role:"combobox","aria-expanded":S,"aria-haspopup":"listbox",id:`${g}-database-multiple-checkbox`,children:e.jsxs("ul",{className:i.dropdownOptions,children:[e.jsx("li",{className:`${i.dropdownOption} ${i.disabled}`,tabIndex:0,"data-value":b.ProjectModalFormDatabasePlaceholder,role:"option",children:e.jsx("em",{children:b.ProjectModalFormDatabasePlaceholder})}),Object.values(be).map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":s.indexOf(r)>-1,className:`${i.dropdownOption} ${a.indexOf(r)>-1?i.selected:""}`,onClick:()=>c(r),children:r},r))]})})}),e.jsx("div",{className:M.modalFormFooter,children:e.jsx(H.Footer,{onSubmit:re,onCancel:J,showCancel:!0,cancelText:b.AddProjectModalCancel,submitText:b.AddProjectModalSubmit})})]})]})},X={projectName:"",developers:"",client:"",repoUrl:"",ci:"",cd:"",deployCount:"",errorsCount:"",id:"",percentageCompletion:"",reportNc:"",status:"",warningCount:"",frontend:"",backend:"",database:""},Y={frontend:[],backend:[],database:[]},kt=[],ee=t=>({projectName:t.projectName,client:t.client,repoUrl:t.repoUrl,developers:t.developers.replaceAll(",","|"),ci:t.ci==="true",cd:t.cd==="true",frontendTecnology:t.frontend.replaceAll(",","|"),backendTecnology:t.backend,databases:t.database.replaceAll(",","|"),deployCount:t.deployCount?Number(t.deployCount):0,errorsCount:t.errorsCount?Number(t.errorsCount):0,id:t.id?Number(t.id):0,percentageCompletion:t.percentageCompletion?Number(t.percentageCompletion):0,reportNc:t.reportNc?Number(t.reportNc):0,status:t.status?ue(t.status):pe.Pending,warningCount:t.warningCount?Number(t.warningCount):0}),Nt=t=>({id:`${t.id}`,projectName:t.projectName,client:t.client,repoUrl:t.repoUrl,developers:t.developers,ci:`${t.ci}`,cd:`${t.cd}`,frontend:t.frontendTecnology,backend:t.backendTecnology,database:t.databases,deployCount:`${t.deployCount}`,errorsCount:`${t.deployCount}`,percentageCompletion:`${t.percentageCompletion}`,reportNc:`${t.reportNc}`,status:Z(t.status),warningCount:`${t.warningCount}`}),te=({open:t,title:o,projectId:p,onClose:m,OnSubmit:f})=>{const C=l.useId(),[h,c]=l.useState(X),[n,u]=l.useState(Y),[g,N]=l.useState(kt),[I,y]=l.useState(!1),z=`header-${C}`,S=(d,k)=>{c(a=>({...a,[d]:k}))},A=d=>{if(n.frontend.indexOf(d)>-1){const a=n.frontend.filter(x=>x!==d);u(x=>({...x,frontend:a}))}else u(a=>({...a,frontend:[...a.frontend,d]}))},D=d=>{if(n.backend.indexOf(d)>-1){const a=n.backend.filter(x=>x!==d);u(x=>({...x,backend:a}))}else u(a=>({...a,backend:[...a.backend,d]}))},B=d=>{if(n.database.indexOf(d)>-1){const a=n.database.filter(x=>x!==d);u(x=>({...x,database:a}))}else u(a=>({...a,database:[...a.database,d]}))},$=d=>{if(g.indexOf(d)>-1){const a=g.filter(x=>x!==d);N(a)}else N(a=>[...a,d])},P=()=>{m(),c(X),u(Y)};return l.useEffect(()=>{t&&p&&(async k=>{y(!0);try{const a=await xe(k),x=Nt(a);c(x),u({database:a.databases.split("|"),frontend:a.frontendTecnology.split("|"),backend:a.backendTecnology.split(",")}),N(a.developers.split("|"))}catch{console.log("loadProjectsData-Error")}y(!1)})(p)},[t,p]),e.jsxs(e.Fragment,{children:[e.jsxs(H,{open:t,ariaLabelledBy:z,onClose:P,allowEscape:!0,children:[e.jsx(H.Header,{title:o,onClose:P,showIconCloseText:!1,showCloseButton:!0}),e.jsx("div",{className:ft.modalForm,children:e.jsx(Pt,{projectFields:h,onProjectFormChange:S,onSubmit:f,onClose:P,onFrontendChange:A,onDatabaseChange:B,onBackendChange:D,tecnologiesFields:n,developersFields:g,onDeveloperChange:$})})]}),e.jsx(W,{show:I,text:"...Loading Project"})]})},St=({open:t,updateGrid:o,onClose:p})=>{const[m,f]=l.useState(!1),C=async(h,c)=>{if(h){f(!0);try{const n=ee(c.projectFormFields),u=await he(n);o(u),p()}catch{console.log("ProjectCreateModal-Error")}f(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(te,{open:t,title:b.AddProjectModalTitle,onClose:p,OnSubmit:C}),e.jsx(W,{show:m,text:"...Creating Project"})]})},$t=({open:t,projectId:o,updateGrid:p,onClose:m})=>{const[f,C]=l.useState(!1),h=async(c,n)=>{if(c){C(!0);try{const u=ee(n.projectFormFields),g=await me(u);p(g),m()}catch{console.log("ProjectUpdateModal-Error")}C(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(te,{open:t,title:b.UpdateProjectModalTitle,onClose:m,OnSubmit:h,projectId:o}),e.jsx(W,{show:f,text:"...Updating Project"})]})},Mt=({isProjectCreateModalOpen:t,closeProjectCreateModal:o})=>{const[p,m]=l.useState(!1),[f,C]=l.useState([]),[h,c]=l.useState("id"),[n,u]=l.useState(!0),[g,N]=l.useState(!1),[I,y]=l.useState(),{headers:z}=jt(),S=s=>s===h,A=s=>{S(s)?u(!n):(c(s),u(!1))},D=s=>S(s)?j.activeSorter:j.sortable,$=h?je(f,h,n,h==="status"?we:void 0):f,P=l.useCallback(async()=>{m(!0);try{const s=await ye();C(s)}catch{console.log("error")}m(!1)},[]),d=s=>{const v=f.find(w=>w.id===s.id);if(!v)return P();const O=f.filter(w=>w.id!==v.id);O.push(s),C(O)},k=async s=>{try{await ve(s),P()}catch{console.log("removeProject-Error")}},a=s=>{y(s),N(!0)},x=()=>{y(void 0),N(!1)};return l.useEffect(()=>{P()},[P]),e.jsxs("div",{className:U.projectGrid,children:[e.jsxs("div",{className:j.table,children:[e.jsx("div",{className:`${j.thead} ${U.theadBottom} ${U.theadLabel}`,children:e.jsxs("div",{className:j.tr,children:[z.map(({name:s,label:v,isSortable:O,style:w})=>e.jsxs("div",{className:`${D(s)}`,style:w,onClick:()=>O?A(s):void 0,"data-qa":`${s}-sort-button`,children:[e.jsx("span",{children:v}),O&&e.jsx(V,{icon:fe(S(s),!n)})]},s)),e.jsx("div",{className:j.headingActions,style:{width:100}})]})}),$.length===0&&!p&&e.jsx("div",{className:j.noResultsMessage,children:"No Results Were Found"}),e.jsx("div",{className:U.tableBody,children:$.map(s=>e.jsx("div",{"data-qa":"projects-rows-data",children:e.jsxs(_,{row:s,children:[z.map(({name:v,style:O,rowFormatter:w})=>w?e.jsx(_.CustomRowValue,{style:O,children:w(s,v)},v):e.jsx(_.Row,{value:s[v],style:O},v)),e.jsx(_.Actions,{onEdit:()=>a(s.id),onDelete:()=>k(s.id)})]})},`${s.id}${s.projectName}${s.status}`))})]}),e.jsx(W,{show:p,text:"Loading Projects"}),e.jsx(St,{open:t,onClose:o,updateGrid:d}),e.jsx($t,{open:g,projectId:I,updateGrid:d,onClose:x})]})},At=()=>{const[t,o]=l.useState(!1);return l.useEffect(()=>{document.title="OLS Project"},[]),e.jsx("div",{className:R.project,children:e.jsx("div",{className:`${R.fullRow} ${R.stretchCard}`,children:e.jsxs(Q,{width:"100%",children:[e.jsx(Q.Header,{title:b.ProjectListTitle}),e.jsx("div",{className:R.addActionGroup,children:e.jsx("button",{type:"submit",onClick:()=>o(!0),children:b.ProjectListAddButton})}),e.jsx("div",{className:R.tableGridResponsive,children:e.jsx(Mt,{isProjectCreateModalOpen:t,closeProjectCreateModal:()=>o(!1)})})]})})})};export{At as default};
