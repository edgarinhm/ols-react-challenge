import{j as e,F as O,z as Q,A as X,t as L,C as Y,r as l,h as k,M as b,S as E,E as Z,G as ee,I as re}from"./index-CN1DISFF.js";import{C as T}from"./card-k6AiaAe8.js";import{t as g,e as te,B as se,D as ae,d as M,F as oe,M as B,S as ne,j as le,i as ie,k as ce}from"./database-technology-type-Dr-GxYf2.js";const de="rgb(255, 255, 255)",ge="rgb(0, 0, 0)",ue="rgb(204, 204, 204)",me="rgb(199, 23, 23)",be="rgb(254, 131, 0)",he="rgb(0, 128, 0)",pe="0",ye="900",xe="1000",ve="1005",je="1030",fe="1035",Se="1040",we="1050",$e="1100",Ne="1200",Ce="1500",ke="950",ze="_container_xmw0h_119",Me="_addActionGroup_xmw0h_125",Ue="_tableGridResponsive_xmw0h_180",Fe="_stretchCard_xmw0h_187",Pe="_fullRow_xmw0h_196",F={white:de,black:ge,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:ue,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:me,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:be,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:he,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:pe,zBackground:ye,zPopover:xe,zAgentNotes:ve,zPaymentPanelOverlay:je,zStoreMessagingDisclaimer:fe,zModalBackground:Se,zModal:we,zTooltip:$e,zSpinner:Ne,zBanner:Ce,zComponentSpinner:ke,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',container:ze,addActionGroup:Me,"is-active":"_is-active_xmw0h_173",tableGridResponsive:Ue,stretchCard:Fe,fullRow:Pe},_e="rgb(255, 255, 255)",Ae="rgb(0, 0, 0)",Re="rgb(204, 204, 204)",Oe="rgb(199, 23, 23)",Be="rgb(254, 131, 0)",Ee="rgb(0, 128, 0)",Ge="0",Le="900",Te="1000",Ie="1005",De="1030",Ve="1035",He="1040",qe="1050",We="1100",Ke="1200",Je="1500",Qe="950",Xe="_tableBody_6k9lv_119",Ye="_projectGrid_6k9lv_126",Ze="_theadLabel_6k9lv_126",er="_theadBottom_6k9lv_130",A={white:_e,black:Ae,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:Re,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:Oe,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:Be,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:Ee,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:Ge,zBackground:Le,zPopover:Te,zAgentNotes:Ie,zPaymentPanelOverlay:De,zStoreMessagingDisclaimer:Ve,zModalBackground:He,zModal:qe,zTooltip:We,zSpinner:Ke,zBanner:Je,zComponentSpinner:Qe,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',tableBody:Xe,projectGrid:Ye,theadLabel:Ze,theadBottom:er},z=({row:r,children:t,handleOnDrawerOpen:o,getKey:c})=>e.jsx("div",{className:g.table,children:e.jsx("div",{className:g.row,children:e.jsx("div",{tabIndex:0,className:g.heading,onClick:()=>{o&&o(r)},"data-qa":`${c(r)}-grid-row`,children:t})})}),rr=({value:r,style:t})=>e.jsx("div",{className:`${g.column}`,style:t,children:e.jsx("div",{className:g.content,children:e.jsx("span",{children:r})})}),tr=({style:r,children:t})=>e.jsx("div",{className:`${g.column}`,style:r,children:e.jsx("div",{className:g.content,children:t})}),sr=({onEdit:r,onDelete:t})=>e.jsx("div",{className:g.actions,style:{width:100},children:e.jsxs("div",{className:g.actionsInnerContainer,children:[e.jsx(O,{icon:Q,style:{padding:"0.125rem"},onClick:r}),e.jsx(O,{icon:X,style:{padding:"0.125rem"},onClick:t})]})});z.Row=rr;z.CustomRowValue=tr;z.Actions=sr;const ar=()=>({pipeRowValueFormatter:r=>L.replacePipeToNewHtmlLine(r).map((t,o)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:t})},`${t}-${o}`)),periodRowValueFormatter:r=>L.replacePeriodToNewHtmlLine(r).map((t,o)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:t})},`${t}-${o}`)),alertTextColorRowFormatter:(r,t)=>e.jsx("div",{className:g.status,style:{width:"auto"},children:e.jsx("span",{className:`${g[t]}`,children:r})}),customStyleClassRowFormatter:(r,t)=>e.jsx("span",{className:t,children:r})});var V=(r=>(r.Administrator="Administrator",r.Developer="Developer",r.ReadOnly="ReadOnly",r))(V||{});const or=r=>{switch(r){case"1":return"Administrator";case"2":return"Developer";default:return"ReadOnly"}},nr=r=>{switch(r){case"Administrator":return 1;case"Developer":return 2;default:return 0}},lr=()=>{const{pipeRowValueFormatter:r}=ar(),t={pipeFormatter:(c,n)=>{const i=c[n];return["list"].includes(n)?r(`${i}`):""},avatarFormatter:(c,n)=>{const i=c[n];return n==="urlPhoto"?e.jsx(Y,{url:`${i}`,alt:`image of user ${i} ${i}`}):""},rolFormatter:(c,n)=>{const i=c[n];return n==="rol"?e.jsx("span",{children:or(`${i}`)}):""}};return{headers:[{name:"urlPhoto",label:"",style:{minWidth:"150px"},rowFormatter:t.avatarFormatter},{name:"name",label:"Nombre",isSortable:!0,style:{minWidth:"150px"}},{name:"lastName",label:"Apellido",isSortable:!0,style:{minWidth:"150px"}},{name:"rol",label:"Rol",isSortable:!0,style:{minWidth:"150px"},rowFormatter:t.rolFormatter},{name:"list",label:"TecnologÃ­as",isSortable:!0,style:{minWidth:"150px"},rowFormatter:t.pipeFormatter},{name:"area",label:"Area",isSortable:!0,style:{minWidth:"100px"}}],projectGridRowFormatter:(c,n)=>{const i=n==null?void 0:n.filter(h=>h.developers.includes(`${c.name} ${c.lastName}`)),d=i==null?void 0:i.map(h=>h.projectName);return i&&d?r(d.join("|")):""}}},ir="_modalForm_vikxx_1",cr={modalForm:ir},dr="_row_1l204_1",gr="_modalFormFooter_1l204_5",U={row:dr,modalFormFooter:gr},P={name:r=>{const t=[];return r||t.push("Username is required"),r.length>50&&t.push("Username limited to 50 characters"),t},lastName:r=>{const t=[];return r||t.push("Lastname is required"),r.length>50&&t.push("Lastname limited to 50 characters"),t},rol:r=>{const t=[];return r||t.push("Role is required"),t},technologies:r=>{const t=[];return r||t.push("Technologies are required"),t},division:r=>{const t=[];return r||t.push("Division is required"),t}},ur=(r,t)=>{const{name:o,lastName:c,rol:n,area:i}=r,[d,h]=l.useState({}),[p,u]=l.useState(!1);return l.useEffect(()=>{let S=!1;const m={},w=P.name(o),$=P.lastName(c),v=P.rol(n),f=P.technologies(t),x=P.division(i);S||(S=!!w.length||!!$.length||!!v.length||!!f.length||!!x.length),m.name=w,m.lastName=$,m.rol=v,m.technologies=f,m.division=x,h(m),u(S)},[i,t,c,o,n]),[p,d]};var H=(r=>(r.Support="Support",r.Staff="Staff",r.InternalApps="Internal Apps",r.NotAsigned="Not Asigned",r))(H||{});const mr=r=>{switch(r){case"Support":return"Soporte";case"Staff":return"Staff";case"Internal Apps":return"Fabrica";default:return"Sin Asignar"}},br=({userFields:r,tecnologiesFields:t,onUserFormChange:o,onSubmit:c,onClose:n,onTechnologyChange:i})=>{const d=l.useId(),[h,p]=l.useState(!1),[u,S]=l.useState(!1),m=l.useMemo(()=>t==null?void 0:t.join(", "),[t]),w=[...Object.values(te),...Object.values(se),...Object.values(ae)],[$,v]=ur(r,m),f=async()=>{S(!0),await c(!$,{userFormFields:{...r,list:m.replaceAll(",","|")}})},x=()=>{n(),S(!1)};return e.jsxs("form",{noValidate:!0,autoComplete:"off",className:U.modalForm,onSubmit:a=>{a.preventDefault()},children:[e.jsx("div",{className:U.row,children:e.jsx(k.Input,{id:`${d}-user-name`,type:"text",label:b.UserModalName,value:r.name,onChange:a=>o("name",a.target.value),errors:v.name,showErrors:u})}),e.jsx("div",{className:U.row,children:e.jsx(k.Input,{id:`${d}-user-lastname`,type:"text",label:b.UserModalLastName,value:r.lastName,onChange:a=>o("lastName",a.target.value),errors:v.lastName,showErrors:u})}),e.jsx("div",{className:U.row,children:e.jsxs(k.Select,{id:`${d}-rol`,type:"text",label:b.UserModalRole,value:r.rol,onChange:a=>o("rol",a.target.value),errors:v.rol,showErrors:u,children:[!r.rol&&e.jsx(k.SelectOption,{value:b.UserModalRolePlaceHolder}),Object.values(V).map(a=>e.jsx(k.SelectOption,{value:a},a))]})}),e.jsxs("div",{className:U.row,children:[e.jsx("div",{"aria-labelledby":"technology-multiple-checkbox-label",className:M.dropdownLabel,children:b.UserModalTechnology}),e.jsx(oe,{id:`${d}-technology`,open:h,onClose:()=>p(!1),onTogglePopover:()=>p(a=>!a),value:m,errors:v.technologies,showErrors:u,testId:"technology-select",placeholder:b.ProjectModalFormDatabasePlaceholder,label:b.UserModalTechnology,children:e.jsx("div",{className:M.dropdown,role:"combobox","aria-expanded":h,"aria-haspopup":"listbox",id:`${d}-technology-multiple-checkbox`,children:e.jsxs("ul",{className:M.dropdownOptions,children:[e.jsx("li",{className:`${M.dropdownOption} ${M.disabled}`,tabIndex:0,"data-value":b.ProjectModalFormDatabasePlaceholder,role:"option",children:e.jsx("em",{children:b.ProjectModalFormDatabasePlaceholder})}),w.map((a,j)=>e.jsx("li",{tabIndex:-1,role:"option","data-value":a,"aria-selected":m.indexOf(a)>-1,className:`${M.dropdownOption} ${m.indexOf(a)>-1?M.selected:""}`,onClick:()=>i(a),children:a},`${j}-${a}`))]})})})]}),e.jsx("div",{className:U.row,children:e.jsxs(k.Select,{id:`${d}-division`,label:b.UserModalDivision,value:r.area,onChange:a=>o("area",a.target.value),errors:v.division,showErrors:u,children:[!r.area&&e.jsx(k.SelectOption,{value:b.UserModalDivisionPlaceHolder}),Object.values(H).map(a=>e.jsx(k.SelectOption,{value:a},a))]})}),e.jsx("div",{className:U.modalFormFooter,children:e.jsx(B.Footer,{onSubmit:f,onCancel:x,showCancel:!0,cancelText:b.AddProjectModalCancel,submitText:b.AddProjectModalSubmit})})]})},I={id:"",name:"",lastName:"",urlPhoto:"",rol:"",list:"",area:""},hr=r=>({name:D(r.name),lastName:D(r.lastName),urlPhoto:r.urlPhoto,rol:nr(r.rol),list:pr(r.list),area:mr(r.area)}),pr=r=>r.split("|").map(t=>t.trim()).join("|"),D=r=>r.trim().split(" ").map(o=>`${o.charAt(0).toUpperCase()}${o.slice(1)}`).join(" "),yr=({open:r,title:t,userId:o,onClose:c,OnSubmit:n})=>{const i=l.useId(),[d,h]=l.useState(I),[p,u]=l.useState([]),[S,m]=l.useState(!1),w=`header-${i}`,$=(x,a)=>{h(j=>({...j,[x]:a}))},v=x=>{if(p.indexOf(x)>-1){const j=p.filter(R=>R!==x);u(j)}else u(j=>[...j,x])},f=()=>{c(),h(I),u([])};return l.useEffect(()=>{o&&m(!0)},[o]),e.jsxs(e.Fragment,{children:[e.jsxs(B,{open:r,ariaLabelledBy:w,onClose:f,allowEscape:!0,children:[e.jsx(B.Header,{title:t,onClose:f,showIconCloseText:!1,showCloseButton:!0}),e.jsx("div",{className:cr.modalForm,children:e.jsx(br,{userFields:d,onUserFormChange:$,onSubmit:n,onClose:f,tecnologiesFields:p,onTechnologyChange:v})})]}),e.jsx(E,{show:S,text:"...Loading User"})]})},xr=({open:r,updateGrid:t,onClose:o})=>{const[c,n]=l.useState(!1),i=async(d,h)=>{if(d){n(!0);try{const p=hr(h.userFormFields),u=await Z(p);t(u),o()}catch{console.log("CreateUserModal-Error")}n(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(yr,{open:r,title:b.CreateUserModalTitle,onClose:o,OnSubmit:i}),e.jsx(E,{show:c,text:"...Creating User"})]})},vr=({isCreateUserModalOpen:r,closeCreateUserModal:t})=>{const[o,c]=l.useState(!1),[n,i]=l.useState([]),[d,h]=l.useState("id"),[p,u]=l.useState(!0),[S,m]=l.useState(!1),[w,$]=l.useState(),[v,f]=l.useState(),{headers:x,projectGridRowFormatter:a}=lr(),j=s=>s===d,R=s=>{j(s)?u(!p):(h(s),u(!1))},q=s=>j(s)?g.activeSorter:g.sortable,G=d?ne(n,d,p,d==="name"?ce:void 0):n,_=l.useCallback(async()=>{c(!0);try{const s=await ee();i(s)}catch{console.log("error")}c(!1)},[]),W=async s=>{try{await re(s),_()}catch{console.log("removeuser-Error")}},K=s=>{$(s),m(!0)},J=s=>{const y=n.find(C=>C.id===s.id);if(!y)return _();const N=n.filter(C=>C.id!==y.id);N.push(s),i(N)};return l.useEffect(()=>{_()},[_]),l.useEffect(()=>{(async()=>{try{const y=await ie();f(y)}catch{console.log("GetProjects-error")}})()},[]),e.jsxs("div",{className:A.userGrid,children:[e.jsxs("div",{className:g.table,children:[e.jsx("div",{className:`${g.thead} ${A.theadBottom} ${A.theadLabel}`,children:e.jsxs("div",{className:g.tr,children:[x.map(({name:s,label:y,isSortable:N,style:C})=>e.jsxs("div",{className:`${q(s)}`,style:C,onClick:()=>N?R(s):void 0,"data-qa":`${s}-sort-button`,children:[e.jsx("span",{children:y}),N&&e.jsx(O,{icon:le(j(s),!p)})]},s)),e.jsx("div",{style:{minWidth:"150px"},"data-qa":"projects-sort-button",children:e.jsx("span",{children:"Proyectos"})},"projects"),e.jsx("div",{className:g.headingActions,style:{width:100}})]})}),G.length===0&&!o&&e.jsx("div",{className:g.noResultsMessage,children:"No Results Were Found"}),e.jsx("div",{className:A.tableBody,children:G.map(s=>e.jsxs(z,{row:s,getKey:y=>`${y.id}-user`,children:[x.map(({name:y,style:N,rowFormatter:C})=>C?e.jsx(z.CustomRowValue,{style:N,children:C(s,y)},y):e.jsx(z.Row,{value:s[y],style:N},y)),e.jsx(z.Row,{value:a(s,v),style:{minWidth:"150px"}}),e.jsx(z.Actions,{onEdit:()=>K(s.id),onDelete:()=>W(s.id)})]},`${s.id}-grid-row`))})]}),e.jsx(E,{show:o,text:"...Loading Users"}),e.jsx(xr,{open:r,updateGrid:J,onClose:t}),S&&e.jsx("span",{onClick:()=>w})]})},$r=()=>{const[r,t]=l.useState(!1);return l.useEffect(()=>{document.title="OLS user"},[]),e.jsx("div",{className:F.container,children:e.jsx("div",{className:`${F.fullRow} ${F.stretchCard}`,children:e.jsxs(T,{width:"100%",children:[e.jsx(T.Header,{title:b.UserPageTitle}),e.jsx("div",{className:F.addActionGroup,children:e.jsx("button",{type:"submit",onClick:()=>t(!0),children:b.UserPageAddButton})}),e.jsx("div",{className:F.tableGridResponsive,children:e.jsx(vr,{isCreateUserModalOpen:r,closeCreateUserModal:()=>t(!1)})})]})})})};export{$r as default};
