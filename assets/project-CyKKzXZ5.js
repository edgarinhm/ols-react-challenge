import{j as e,F as q,z as ne,A as le,B as E,t as J,r as l,h as G,M as u,G as ce,S as H}from"./index-DGUT-eWs.js";import{C as Z}from"./card-BUFTJY8F.js";import{t as j,P as U,G as de,a as ie,b as ge,c as re,d as g,F as V,e as be,B as ue,D as pe,M as K,f as he,g as me,C as xe,U as je,h as ye,u as Q,R as X,S as fe,i as ve,j as Ce,k as we,l as Pe}from"./role-verifier-D07h47BR.js";const ke="rgb(255, 255, 255)",Ne="rgb(0, 0, 0)",Se="rgb(204, 204, 204)",$e="rgb(199, 23, 23)",Me="rgb(254, 131, 0)",ze="rgb(0, 128, 0)",Oe="0",Ae="900",Ie="1000",De="1005",Be="1030",Te="1035",_e="1040",Fe="1050",Re="1100",Ee="1200",Ge="1500",Le="950",Ue="_project_w7wz1_119",Ve="_addActionGroup_w7wz1_125",We="_tableGridResponsive_w7wz1_180",qe="_stretchCard_w7wz1_187",He="_fullRow_w7wz1_196",L={white:ke,black:Ne,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:Se,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:$e,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:Me,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:ze,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:Oe,zBackground:Ae,zPopover:Ie,zAgentNotes:De,zPaymentPanelOverlay:Be,zStoreMessagingDisclaimer:Te,zModalBackground:_e,zModal:Fe,zTooltip:Re,zSpinner:Ee,zBanner:Ge,zComponentSpinner:Le,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',project:Ue,addActionGroup:Ve,"is-active":"_is-active_w7wz1_173",tableGridResponsive:We,stretchCard:qe,fullRow:He},Je="rgb(255, 255, 255)",Ke="rgb(0, 0, 0)",Qe="rgb(204, 204, 204)",Xe="rgb(199, 23, 23)",Ye="rgb(254, 131, 0)",Ze="rgb(0, 128, 0)",et="0",tt="900",rt="1000",ot="1005",at="1030",st="1035",nt="1040",lt="1050",ct="1100",dt="1200",it="1500",gt="950",bt="_tableBody_6k9lv_119",ut="_projectGrid_6k9lv_126",pt="_theadLabel_6k9lv_126",ht="_theadBottom_6k9lv_130",W={white:Je,black:Ke,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:Qe,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:Xe,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:Ye,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:Ze,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:et,zBackground:tt,zPopover:rt,zAgentNotes:ot,zPaymentPanelOverlay:at,zStoreMessagingDisclaimer:st,zModalBackground:nt,zModal:lt,zTooltip:ct,zSpinner:dt,zBanner:it,zComponentSpinner:gt,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',tableBody:bt,projectGrid:ut,theadLabel:pt,theadBottom:ht},F=({row:t,children:o,handleOnDrawerOpen:d})=>e.jsx("div",{className:j.table,children:e.jsx("div",{className:j.row,children:e.jsx("div",{tabIndex:0,className:j.heading,onClick:()=>{d&&d(t)},"data-qa":"project-grid-row",children:o})},t.id)}),mt=({value:t,style:o})=>e.jsx("div",{className:`${j.column}`,style:o,children:e.jsx("div",{className:j.content,children:e.jsx("span",{children:t})})}),xt=({style:t,children:o})=>e.jsx("div",{className:`${j.column}`,style:t,children:e.jsx("div",{className:j.content,children:o})}),jt=({canEdit:t,canDelete:o,onEdit:d,onDelete:p})=>e.jsx("div",{className:j.actions,style:{width:100},children:e.jsxs("div",{className:j.actionsInnerContainer,children:[t&&e.jsx(q,{icon:ne,style:{padding:"0.125rem"},onClick:d}),o&&e.jsx(q,{icon:le,style:{padding:"0.125rem"},onClick:p})]})});F.Row=mt;F.CustomRowValue=xt;F.Actions=jt;const yt=t=>{switch(t){case U.Completed:return E.activeRounded;case U.InProgress:return E.inProgressRounded;case U.Pending:return E.warningRounded;case U.Fixed:return E.upcomingRounded;default:return E.inactiveRounded}},ft=()=>{const t=(m,c)=>{const s=m[c];return["developers","frontendTecnology","databases"].includes(c)?J.replacePipeToNewHtmlLine(s).map((h,b)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:h})},`${h}-${b}`)):""},o=(m,c)=>{const s=m[c];return["backendTecnology"].includes(c)?J.replacePeriodToNewHtmlLine(s).map((h,b)=>e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:e.jsx("span",{children:h})},`${h}-${b}`)):""},d=(m,c)=>{const s=m[c];return["ci","cd"].includes(c)?e.jsx("span",{className:`${j.status}`,children:e.jsx(q,{className:`${j[de(s)]}`,icon:ie(s)})}):""},p=(m,c)=>{const s=m[c];return["deployCount","errorsCount","reportNc","warningCount","percentageCompletion"].includes(c)?e.jsx("div",{className:j.status,style:{width:"auto"},children:e.jsx("span",{className:`${j[ge(c)]}`,children:c==="percentageCompletion"?J.percentageUnit(s,1):s})}):""};return{headers:[{name:"projectName",label:"proyecto",isSortable:!0,style:{minWidth:"230px"}},{name:"client",label:"cliente",style:{minWidth:"280px"}},{name:"repoUrl",label:"repositorio",style:{minWidth:"170px"}},{name:"developers",label:"desarrolladores",style:{minWidth:"230px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},rowFormatter:t},{name:"ci",label:"ci",style:{minWidth:"40px",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},rowFormatter:d},{name:"cd",label:"cd",style:{minWidth:"50px",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},rowFormatter:d},{name:"frontendTecnology",label:"frontend",style:{minWidth:"150px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",textAlign:"left"},rowFormatter:t},{name:"backendTecnology",label:"backend",style:{minWidth:"150px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},rowFormatter:o},{name:"databases",label:"db",style:{minWidth:"150px",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},rowFormatter:t},{name:"warningCount",label:"alertas",style:{minWidth:"60px",textAlign:"center"},rowFormatter:p},{name:"errorsCount",label:"errores",style:{minWidth:"60px",textAlign:"center"},rowFormatter:p},{name:"deployCount",label:"cant. despliegues",style:{minWidth:"120px",textAlign:"center"},rowFormatter:p},{name:"percentageCompletion",label:"avance",style:{minWidth:"60px",textAlign:"center"},rowFormatter:p},{name:"reportNc",label:"reporte NC's",style:{minWidth:"100px",textAlign:"center"},rowFormatter:p},{name:"status",label:"status",style:{minWidth:"120px"},rowFormatter:(m,c)=>{const s=m[c];return"status".includes(c)?e.jsx("span",{className:`${[yt(re(s))]}`,style:{textTransform:"capitalize",color:"black",fontWeight:"normal"},children:s}):""}}]}},vt="_modalForm_vikxx_1",Ct={modalForm:vt},wt="_row_1l204_1",Pt="_modalFormFooter_1l204_5",N={row:wt,modalFormFooter:Pt},_={projectName:t=>{const o=[];return t||o.push("Project name is required"),t.length>50&&o.push("Project Name limited to 50 characters"),o},client:t=>{const o=[];return t||o.push("Client is required"),t.length>50&&o.push("Client limited to 50 characters"),o},repository:t=>{const o=[];return t||o.push("Repository is required"),t.length>50&&o.push("Repository limited to 50 characters"),o},developers:t=>{const o=[];return t||o.push("Developers are required"),o},frontend:t=>{const o=[];return t||o.push("Frontend technology is required"),o},backend:t=>{const o=[];return t||o.push("Backend technology is required"),o},database:t=>{const o=[];return t||o.push("Database technology is required"),o}},kt=(t,o,d,p,v)=>{const{projectName:C,client:m,repoUrl:c}=t,[s,h]=l.useState({}),[b,P]=l.useState(!1);return l.useEffect(()=>{let O=!1;const y={},A=_.projectName(C),I=_.client(m),S=_.repository(c),$=_.developers(v),D=_.frontend(o),M=_.backend(d),B=_.database(p);O||(O=!!A.length||!!I.length||!!S.length||!!$.length||!!D.length||!!M.length||!!B.length),y.projectName=A,y.client=I,y.repository=S,y.developers=$,y.frontend=D,y.backend=M,y.database=B,h(y),P(O)},[d,m,p,v,o,C,c]),[b,s]},Nt=({projectFields:t,tecnologiesFields:o,developersFields:d,onProjectFormChange:p,onSubmit:v,onClose:C,onFrontendChange:m,onDatabaseChange:c,onBackendChange:s,onDeveloperChange:h})=>{const b=l.useId(),[P,O]=l.useState(!1),[y,A]=l.useState(!1),[I,S]=l.useState(!1),[$,D]=l.useState(!1),[M,B]=l.useState(),[i,w]=l.useState(!1),a=l.useMemo(()=>{var r;return(r=o.backend)==null?void 0:r.join(", ")},[o.backend]),x=l.useMemo(()=>{var r;return(r=o.frontend)==null?void 0:r.join(", ")},[o.frontend]),R=l.useMemo(()=>{var r;return(r=o.database)==null?void 0:r.join(", ")},[o.database]),T=l.useMemo(()=>d==null?void 0:d.join(", "),[d]),[n,f]=kt(t,x,a,R,T);l.useEffect(()=>{(async()=>{const se=await ce();B(se.map(Y=>`${Y.name} ${Y.lastName}`))})()},[]);const z=async()=>{w(!0),await v(!n,{projectFormFields:{...t,developers:T,frontend:x,backend:a,database:R}}),k()},k=()=>{C(),w(!1)};return e.jsxs("form",{noValidate:!0,autoComplete:"off",className:N.modalForm,onSubmit:r=>{r.preventDefault()},children:[e.jsx("div",{className:N.row,children:e.jsx(G.Input,{id:`${b}-project-name`,type:"text",label:u.AddProjectModalFormProject,value:t.projectName,onChange:r=>p("projectName",r.target.value),errors:f.projectName,showErrors:i})}),e.jsx("div",{className:N.row,children:e.jsx(G.Input,{id:`${b}-client`,type:"text",label:u.AddProjectModalFormClient,value:t.client,onChange:r=>p("client",r.target.value),errors:f.client,showErrors:i})}),e.jsx("div",{className:N.row,children:e.jsx(G.Input,{id:`${b}-repository`,type:"text",label:u.AddProjectModalFormRepository,value:t.repoUrl,placeholder:"https://",onChange:r=>p("repoUrl",r.target.value),errors:f.repository,showErrors:i})}),e.jsx("div",{className:N.row,children:e.jsx(G.CheckInput,{id:`${b}-ci`,type:"checkbox",label:u.AddProjectModalFormCI,checked:t.ci==="true",onChange:r=>p("ci",`${r.target.checked}`)})}),e.jsx("div",{className:N.row,children:e.jsx(G.CheckInput,{id:`${b}-cd`,type:"checkbox",label:u.AddProjectModalFormCD,checked:t.cd==="true",onChange:r=>p("cd",`${r.target.checked}`)})}),e.jsxs("div",{className:N.row,children:[e.jsx("div",{"aria-labelledby":"developers-multiple-checkbox-label",className:g.dropdownLabel,children:u.AddProjectModalFormDevelopers}),e.jsx(V,{id:`${b}-developers`,open:$,onClose:()=>D(!1),onTogglePopover:()=>D(r=>!r),value:T,errors:f.developers,showErrors:i,testId:"developers-select",placeholder:u.ProjectModalFormDeveloperPlaceholder,children:e.jsx("div",{className:g.dropdown,role:"combobox","aria-expanded":y,"aria-haspopup":"listbox",id:`${b}-developers-multiple-checkbox`,children:e.jsxs("ul",{className:g.dropdownOptions,children:[e.jsx("li",{className:`${g.dropdownOption} ${g.disabled}`,tabIndex:0,"data-value":u.ProjectModalFormDeveloperPlaceholder,role:"option",children:e.jsx("em",{children:u.ProjectModalFormDeveloperPlaceholder})}),M==null?void 0:M.map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":T.indexOf(r)>-1,className:`${g.dropdownOption} ${T.indexOf(r)>-1?g.selected:""}`,onClick:()=>h(r),children:r},r))]})})})]}),e.jsxs("div",{className:N.row,children:[e.jsx("div",{"aria-labelledby":"frontend-multiple-checkbox-label",className:g.dropdownLabel,children:u.AddProjectModalFormFrontend}),e.jsx(V,{id:`${b}-frontend`,open:y,onClose:()=>A(!1),onTogglePopover:()=>A(r=>!r),value:x,errors:f.frontend,showErrors:i,testId:"frontend-select",placeholder:u.ProjectModalFormFrontendPlaceholder,children:e.jsx("div",{className:g.dropdown,role:"combobox","aria-expanded":y,"aria-haspopup":"listbox",id:`${b}-frontend-multiple-checkbox`,children:e.jsxs("ul",{className:g.dropdownOptions,children:[e.jsx("li",{className:`${g.dropdownOption} ${g.disabled}`,tabIndex:0,"data-value":u.ProjectModalFormFrontendPlaceholder,role:"option",children:e.jsx("em",{children:u.ProjectModalFormFrontendPlaceholder})}),Object.values(be).map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":x.indexOf(r)>-1,className:`${g.dropdownOption} ${x.indexOf(r)>-1?g.selected:""}`,onClick:()=>m(r),children:r},r))]})})})]}),e.jsxs("div",{className:N.row,children:[e.jsx("div",{"aria-labelledby":"backend-multiple-checkbox-label",className:g.dropdownLabel,children:u.AddProjectModalFormBackend}),e.jsx(V,{id:`${b}-backend`,open:P,onClose:()=>O(!1),onTogglePopover:()=>O(r=>!r),value:a,errors:f.backend,showErrors:i,testId:"backend-select",placeholder:u.ProjectModalFormBackendPlaceholder,children:e.jsx("div",{className:g.dropdown,role:"combobox","aria-expanded":P,"aria-haspopup":"listbox",id:`${b}-backend-multiple-checkbox`,children:e.jsxs("ul",{className:g.dropdownOptions,children:[e.jsx("li",{className:`${g.dropdownOption} ${g.disabled}`,tabIndex:0,"data-value":u.ProjectModalFormBackendPlaceholder,role:"option",children:e.jsx("em",{children:u.ProjectModalFormBackendPlaceholder})}),Object.values(ue).map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":a.indexOf(r)>-1,className:`${g.dropdownOption} ${a.indexOf(r)>-1?g.selected:""}`,onClick:()=>s(r),children:r},r))]})})})]}),e.jsxs("div",{className:N.row,children:[e.jsx("div",{"aria-labelledby":"database-multiple-checkbox-label",className:g.dropdownLabel,children:u.AddProjectModalFormDatabases}),e.jsx(V,{id:`${b}-database`,open:I,onClose:()=>S(!1),onTogglePopover:()=>S(r=>!r),value:R,errors:f.database,showErrors:i,testId:"database-select",placeholder:u.ProjectModalFormDatabasePlaceholder,children:e.jsx("div",{className:g.dropdown,role:"combobox","aria-expanded":I,"aria-haspopup":"listbox",id:`${b}-database-multiple-checkbox`,children:e.jsxs("ul",{className:g.dropdownOptions,children:[e.jsx("li",{className:`${g.dropdownOption} ${g.disabled}`,tabIndex:0,"data-value":u.ProjectModalFormDatabasePlaceholder,role:"option",children:e.jsx("em",{children:u.ProjectModalFormDatabasePlaceholder})}),Object.values(pe).map(r=>e.jsx("li",{tabIndex:-1,role:"option","data-value":r,"aria-selected":R.indexOf(r)>-1,className:`${g.dropdownOption} ${a.indexOf(r)>-1?g.selected:""}`,onClick:()=>c(r),children:r},r))]})})}),e.jsx("div",{className:N.modalFormFooter,children:e.jsx(K.Footer,{onSubmit:z,onCancel:k,showCancel:!0,cancelText:u.AddProjectModalCancel,submitText:u.AddProjectModalSubmit})})]})]})},ee={projectName:"",developers:"",client:"",repoUrl:"",ci:"",cd:"",deployCount:"",errorsCount:"",id:"",percentageCompletion:"",reportNc:"",status:"",warningCount:"",frontend:"",backend:"",database:""},te={frontend:[],backend:[],database:[]},St=[],oe=t=>({projectName:t.projectName,client:t.client,repoUrl:t.repoUrl,developers:t.developers.replaceAll(",","|"),ci:t.ci==="true",cd:t.cd==="true",frontendTecnology:t.frontend.replaceAll(",","|"),backendTecnology:t.backend,databases:t.database.replaceAll(",","|"),deployCount:t.deployCount?Number(t.deployCount):0,errorsCount:t.errorsCount?Number(t.errorsCount):0,id:t.id?Number(t.id):0,percentageCompletion:t.percentageCompletion?Number(t.percentageCompletion):0,reportNc:t.reportNc?Number(t.reportNc):0,status:t.status?he(t.status):me.Pending,warningCount:t.warningCount?Number(t.warningCount):0}),$t=t=>({id:`${t.id}`,projectName:t.projectName,client:t.client,repoUrl:t.repoUrl,developers:t.developers,ci:`${t.ci}`,cd:`${t.cd}`,frontend:t.frontendTecnology,backend:t.backendTecnology,database:t.databases,deployCount:`${t.deployCount}`,errorsCount:`${t.deployCount}`,percentageCompletion:`${t.percentageCompletion}`,reportNc:`${t.reportNc}`,status:re(t.status),warningCount:`${t.warningCount}`}),ae=({open:t,title:o,projectId:d,onClose:p,OnSubmit:v})=>{const C=l.useId(),[m,c]=l.useState(ee),[s,h]=l.useState(te),[b,P]=l.useState(St),[O,y]=l.useState(!1),A=`header-${C}`,I=(i,w)=>{c(a=>({...a,[i]:w}))},S=i=>{if(s.frontend.indexOf(i)>-1){const a=s.frontend.filter(x=>x!==i);h(x=>({...x,frontend:a}))}else h(a=>({...a,frontend:[...a.frontend,i]}))},$=i=>{if(s.backend.indexOf(i)>-1){const a=s.backend.filter(x=>x!==i);h(x=>({...x,backend:a}))}else h(a=>({...a,backend:[...a.backend,i]}))},D=i=>{if(s.database.indexOf(i)>-1){const a=s.database.filter(x=>x!==i);h(x=>({...x,database:a}))}else h(a=>({...a,database:[...a.database,i]}))},M=i=>{if(b.indexOf(i)>-1){const a=b.filter(x=>x!==i);P(a)}else P(a=>[...a,i])},B=()=>{p(),c(ee),h(te)};return l.useEffect(()=>{t&&d&&(async w=>{y(!0);try{const a=await ye(w),x=$t(a);c(x),h({database:a.databases.split("|"),frontend:a.frontendTecnology.split("|"),backend:a.backendTecnology.split(",")}),P(a.developers.split("|"))}catch{console.log("loadProjectsData-Error")}y(!1)})(d)},[t,d]),e.jsxs(e.Fragment,{children:[e.jsxs(K,{open:t,ariaLabelledBy:A,onClose:B,allowEscape:!0,children:[e.jsx(K.Header,{title:o,onClose:B,showIconCloseText:!1,showCloseButton:!0}),e.jsx("div",{className:Ct.modalForm,children:e.jsx(Nt,{projectFields:m,onProjectFormChange:I,onSubmit:v,onClose:B,onFrontendChange:S,onDatabaseChange:D,onBackendChange:$,tecnologiesFields:s,developersFields:b,onDeveloperChange:M})})]}),e.jsx(H,{show:O,text:"...Loading Project"})]})},Mt=({open:t,updateGrid:o,onClose:d})=>{const[p,v]=l.useState(!1),C=async(m,c)=>{if(m){v(!0);try{const s=oe(c.projectFormFields),h=await xe(s);o(h),d()}catch{console.log("ProjectCreateModal-Error")}v(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{open:t,title:u.AddProjectModalTitle,onClose:d,OnSubmit:C}),e.jsx(H,{show:p,text:"...Creating Project"})]})},zt=({open:t,projectId:o,updateGrid:d,onClose:p})=>{const[v,C]=l.useState(!1),m=async(c,s)=>{if(c){C(!0);try{const h=oe(s.projectFormFields),b=await je(h);d(b),p()}catch{console.log("ProjectUpdateModal-Error")}C(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{open:t,title:u.UpdateProjectModalTitle,onClose:p,OnSubmit:m,projectId:o}),e.jsx(H,{show:v,text:"...Updating Project"})]})},Ot=({isProjectCreateModalOpen:t,closeProjectCreateModal:o})=>{const[d,p]=l.useState(!1),[v,C]=l.useState([]),[m,c]=l.useState("id"),[s,h]=l.useState(!0),[b,P]=l.useState(!1),[O,y]=l.useState(),A=Q(X.Administrator),I=Q(X.Administrator),{headers:S}=ft(),$=n=>n===m,D=n=>{$(n)?h(!s):(c(n),h(!1))},M=n=>$(n)?j.activeSorter:j.sortable,i=m?fe(v,m,s,m==="status"?Pe:void 0):v,w=l.useCallback(async()=>{p(!0);try{const n=await ve();C(n)}catch{console.log("error")}p(!1)},[]),a=n=>{const f=v.find(k=>k.id===n.id);if(!f)return w();const z=v.filter(k=>k.id!==f.id);z.push(n),C(z)},x=async n=>{try{await we(n),w()}catch{console.log("removeProject-Error")}},R=n=>{y(n),P(!0)},T=()=>{y(void 0),P(!1)};return l.useEffect(()=>{w()},[w]),e.jsxs("div",{className:W.projectGrid,children:[e.jsxs("div",{className:j.table,children:[e.jsx("div",{className:`${j.thead} ${W.theadBottom} ${W.theadLabel}`,children:e.jsxs("div",{className:j.tr,children:[S.map(({name:n,label:f,isSortable:z,style:k})=>e.jsxs("div",{className:`${M(n)}`,style:k,onClick:()=>z?D(n):void 0,"data-qa":`${n}-sort-button`,children:[e.jsx("span",{children:f}),z&&e.jsx(q,{icon:Ce($(n),!s)})]},n)),e.jsx("div",{className:j.headingActions,style:{width:100}})]})}),i.length===0&&!d&&e.jsx("div",{className:j.noResultsMessage,children:"No Results Were Found"}),e.jsx("div",{className:W.tableBody,children:i.map(n=>e.jsx("div",{"data-qa":"projects-rows-data",children:e.jsxs(F,{row:n,children:[S.map(({name:f,style:z,rowFormatter:k})=>k?e.jsx(F.CustomRowValue,{style:z,children:k(n,f)},f):e.jsx(F.Row,{value:n[f],style:z},f)),e.jsx(F.Actions,{canEdit:I,canDelete:A,onEdit:()=>R(n.id),onDelete:()=>x(n.id)})]})},`${n.id}${n.projectName}${n.status}`))})]}),e.jsx(H,{show:d,text:"Loading Projects"}),e.jsx(Mt,{open:t,onClose:o,updateGrid:a}),e.jsx(zt,{open:b,projectId:O,updateGrid:a,onClose:T})]})},Bt=()=>{const[t,o]=l.useState(!1),d=Q(X.CanCreateProject);return l.useEffect(()=>{document.title="OLS Project"},[]),e.jsx("div",{className:L.project,children:e.jsx("div",{className:`${L.fullRow} ${L.stretchCard}`,children:e.jsxs(Z,{width:"100%",children:[e.jsx(Z.Header,{title:u.ProjectListTitle}),d&&e.jsx("div",{className:L.addActionGroup,children:e.jsx("button",{type:"submit",onClick:()=>o(!0),children:u.ProjectListAddButton})}),e.jsx("div",{className:L.tableGridResponsive,children:e.jsx(Ot,{isProjectCreateModalOpen:t,closeProjectCreateModal:()=>o(!1)})})]})})})};export{Bt as default};
