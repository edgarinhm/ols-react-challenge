import{j as r,F as E,z as ee,A as re,t as I,C as te,r as i,h as C,M as p,S as R,E as se,U as ae,I as oe,G as ne,J as le}from"./index-CvlbEJeI.js";import{C as T}from"./card-B8MTU1gV.js";import{t as h,e as ie,B as ce,D as de,d as M,F as ge,M as G,S as ue,j as me,i as he,k as be}from"./database-technology-type-Ds5CqdO4.js";const pe="rgb(255, 255, 255)",ye="rgb(0, 0, 0)",xe="rgb(204, 204, 204)",ve="rgb(199, 23, 23)",je="rgb(254, 131, 0)",fe="rgb(0, 128, 0)",Se="0",we="900",Ue="1000",Ne="1005",$e="1030",Ce="1035",ke="1040",Me="1050",ze="1100",Fe="1200",Pe="1500",_e="950",Ae="_container_xmw0h_119",Re="_addActionGroup_xmw0h_125",Oe="_tableGridResponsive_xmw0h_180",Ee="_stretchCard_xmw0h_187",Ge="_fullRow_xmw0h_196",F={white:pe,black:ye,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:xe,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:ve,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:je,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:fe,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:Se,zBackground:we,zPopover:Ue,zAgentNotes:Ne,zPaymentPanelOverlay:$e,zStoreMessagingDisclaimer:Ce,zModalBackground:ke,zModal:Me,zTooltip:ze,zSpinner:Fe,zBanner:Pe,zComponentSpinner:_e,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',container:Ae,addActionGroup:Re,"is-active":"_is-active_xmw0h_173",tableGridResponsive:Oe,stretchCard:Ee,fullRow:Ge},Le="rgb(255, 255, 255)",Be="rgb(0, 0, 0)",Ie="rgb(204, 204, 204)",Te="rgb(199, 23, 23)",De="rgb(254, 131, 0)",Ve="rgb(0, 128, 0)",qe="0",He="900",We="1000",Je="1005",Ke="1030",Qe="1035",Xe="1040",Ye="1050",Ze="1100",er="1200",rr="1500",tr="950",sr="_tableBody_6k9lv_119",ar="_projectGrid_6k9lv_126",or="_theadLabel_6k9lv_126",nr="_theadBottom_6k9lv_130",A={white:Le,black:Be,"light-black":"rgb(34, 34, 34)","translucid-black":"rgba(0, 0, 0, 0.06)","ghost-grey":"rgb(243, 243, 243)","bg-grey":"rgb(237, 237, 237)","note-blue":"rgb(237, 246, 253)","light-grey":"rgb(224, 224, 224)","very-light-grey":"rgb(206, 206, 206)","hover-grey":"rgb(216, 216, 216)",grey:Ie,"med-grey":"rgb(151, 151, 151)","greyish-brown":"rgb(74, 74, 74)","dark-grey":"rgb(112, 112, 112)","body-grey":"rgb(84, 86, 91)","pinkish-grey":"rgb(204, 204, 204)","inactive-grey":"rgb(187, 187, 187)",red:Te,"light-red":"rgb(247, 220, 220)","light-orange":"rgb(255, 236, 217)",orange:De,"yellow-orange":"rgb(254, 191, 0)","bright-green":"rgb(209, 239, 62)","es-green":"rgb(136, 192, 75)","dark-green":"rgb(78, 108, 46)","strong-green":"rgb(145, 199, 23)","light-grayish-green":"rgb(244, 250, 232)","light-blue":"rgb(116, 193, 255)","light-grayish-blue":"rgb(207, 232, 250)","es-blue":"rgb(15, 138, 231)","med-blue":"#0b68ad","dark-blue":"rgb(11, 93, 155)","light-green-hover":"rgb(173, 212, 132)","mostly-desaturated-dark-blue":"rgb(87, 102, 117)","menu-black":"rgb(51, 51, 51)","pale-green":"rgb(244, 250, 232)","grid-bg-grey":"rgb(247, 247, 246)","royal-blue":"rgb(0, 102, 255)","light-green":"rgb(234, 245, 225)","breakline-gray":"rgb(206, 206, 206)","dark-red":"rgb(139, 0, 0)","dark-orange":"rgb(255, 140, 0)",green:Ve,"medium-light-orange":"rgb(203, 105, 0)","dark-moderate-blue":"rgb(75, 73, 172)","dark-grayish-blue":"rgb(163, 164, 165)","very-light-gray":"rgb(227, 227, 227)","very-pale-white-blue":"rgb(245, 247, 255)","card-tale":"rgb(125, 160, 250)","card-dark-blue":"rgb(71, 71, 161)","card-light-blue":"rgb(121, 120, 233)","card-light-danger":"rgb(121, 120, 233)","very-light-gray-mostly-white":"rgb(245, 245, 245)","slightly-desaturated-green":"rgb(171, 210, 129)",zBase:qe,zBackground:He,zPopover:We,zAgentNotes:Je,zPaymentPanelOverlay:Ke,zStoreMessagingDisclaimer:Qe,zModalBackground:Xe,zModal:Ye,zTooltip:Ze,zSpinner:er,zBanner:rr,zComponentSpinner:tr,"base-font-family":'"Lato", Helvetica, "Lucida Grande", Arial, sans-serif',tableBody:sr,projectGrid:ar,theadLabel:or,theadBottom:nr},k=({row:e,children:t,handleOnDrawerOpen:o,getKey:c})=>r.jsx("div",{className:h.table,children:r.jsx("div",{className:h.row,children:r.jsx("div",{tabIndex:0,className:h.heading,onClick:()=>{o&&o(e)},"data-qa":`${c(e)}-grid-row`,children:t})})}),lr=({value:e,style:t})=>r.jsx("div",{className:`${h.column}`,style:t,children:r.jsx("div",{className:h.content,children:r.jsx("span",{children:e})})}),ir=({style:e,children:t})=>r.jsx("div",{className:`${h.column}`,style:e,children:r.jsx("div",{className:h.content,children:t})}),cr=({onEdit:e,onDelete:t})=>r.jsx("div",{className:h.actions,style:{width:100},children:r.jsxs("div",{className:h.actionsInnerContainer,children:[r.jsx(E,{icon:ee,style:{padding:"0.125rem"},onClick:e}),r.jsx(E,{icon:re,style:{padding:"0.125rem"},onClick:t})]})});k.Row=lr;k.CustomRowValue=ir;k.Actions=cr;const dr=()=>({pipeRowValueFormatter:e=>I.replacePipeToNewHtmlLine(e).map((t,o)=>r.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r.jsx("span",{children:t})},`${t}-${o}`)),periodRowValueFormatter:e=>I.replacePeriodToNewHtmlLine(e).map((t,o)=>r.jsx("div",{style:{display:"flex",flexDirection:"column"},children:r.jsx("span",{children:t})},`${t}-${o}`)),alertTextColorRowFormatter:(e,t)=>r.jsx("div",{className:h.status,style:{width:"auto"},children:r.jsx("span",{className:`${h[t]}`,children:e})}),customStyleClassRowFormatter:(e,t)=>r.jsx("span",{className:t,children:e})});var q=(e=>(e.Administrator="Administrator",e.Developer="Developer",e.ReadOnly="ReadOnly",e))(q||{});const H=e=>{switch(e){case"1":return"Administrator";case"2":return"Developer";default:return"ReadOnly"}},gr=e=>{switch(e){case"Administrator":return 1;case"Developer":return 2;default:return 0}},ur=()=>{const{pipeRowValueFormatter:e}=dr(),t={pipeFormatter:(c,n)=>{const l=c[n];return["list"].includes(n)?e(`${l}`):""},avatarFormatter:(c,n)=>{const l=c[n];return n==="urlPhoto"?r.jsx(te,{url:`${l}`,alt:`image of user ${l} ${l}`}):""},rolFormatter:(c,n)=>{const l=c[n];return n==="rol"?r.jsx("span",{children:H(`${l}`)}):""}};return{headers:[{name:"urlPhoto",label:"",style:{minWidth:"150px"},rowFormatter:t.avatarFormatter},{name:"name",label:"Nombre",isSortable:!0,style:{minWidth:"150px"}},{name:"lastName",label:"Apellido",isSortable:!0,style:{minWidth:"150px"}},{name:"rol",label:"Rol",isSortable:!0,style:{minWidth:"150px"},rowFormatter:t.rolFormatter},{name:"list",label:"TecnologÃ­as",isSortable:!0,style:{minWidth:"150px"},rowFormatter:t.pipeFormatter},{name:"area",label:"Area",isSortable:!0,style:{minWidth:"100px"}}],projectGridRowFormatter:(c,n)=>{const l=n==null?void 0:n.filter(u=>u.developers.includes(`${c.name} ${c.lastName}`)),d=l==null?void 0:l.map(u=>u.projectName);return l&&d?e(d.join("|")):""}}},mr="_modalForm_vikxx_1",hr={modalForm:mr},br="_row_1l204_1",pr="_modalFormFooter_1l204_5",z={row:br,modalFormFooter:pr},P={name:e=>{const t=[];return e||t.push("Username is required"),e.length>50&&t.push("Username limited to 50 characters"),t},lastName:e=>{const t=[];return e||t.push("Lastname is required"),e.length>50&&t.push("Lastname limited to 50 characters"),t},rol:e=>{const t=[];return e||t.push("Role is required"),t},technologies:e=>{const t=[];return e||t.push("Technologies are required"),t},division:e=>{const t=[];return e||t.push("Division is required"),t}},yr=(e,t)=>{const{name:o,lastName:c,rol:n,area:l}=e,[d,u]=i.useState({}),[b,g]=i.useState(!1);return i.useEffect(()=>{let f=!1;const m={},U=P.name(o),w=P.lastName(c),j=P.rol(n),S=P.technologies(t),y=P.division(l);f||(f=!!U.length||!!w.length||!!j.length||!!S.length||!!y.length),m.name=U,m.lastName=w,m.rol=j,m.technologies=S,m.division=y,u(m),g(f)},[l,t,c,o,n]),[b,d]};var W=(e=>(e.Support="Support",e.Staff="Staff",e.InternalApps="Internal Apps",e.NotAsigned="Not Asigned",e))(W||{});const xr=e=>{switch(e){case"Soporte":return"Support";case"Staff":return"Staff";case"Fabrica":return"Internal Apps";default:return"Not Asigned"}},vr=e=>{switch(e){case"Support":return"Soporte";case"Staff":return"Staff";case"Internal Apps":return"Fabrica";default:return"Sin Asignar"}},jr=({userFields:e,tecnologiesFields:t,onUserFormChange:o,onSubmit:c,onClose:n,onTechnologyChange:l})=>{const d=i.useId(),[u,b]=i.useState(!1),[g,f]=i.useState(!1),m=i.useMemo(()=>t==null?void 0:t.join(", "),[t]),U=[...Object.values(ie),...Object.values(ce),...Object.values(de)],[w,j]=yr(e,m),S=async()=>{f(!0),await c(!w,{userFormFields:{...e,list:m.replaceAll(",","|")}}),y()},y=()=>{n(),f(!1)};return r.jsxs("form",{noValidate:!0,autoComplete:"off",className:z.modalForm,onSubmit:s=>{s.preventDefault()},children:[r.jsx("div",{className:z.row,children:r.jsx(C.Input,{id:`${d}-user-name`,type:"text",label:p.UserModalName,value:e.name,onChange:s=>o("name",s.target.value),errors:j.name,showErrors:g})}),r.jsx("div",{className:z.row,children:r.jsx(C.Input,{id:`${d}-user-lastname`,type:"text",label:p.UserModalLastName,value:e.lastName,onChange:s=>o("lastName",s.target.value),errors:j.lastName,showErrors:g})}),r.jsx("div",{className:z.row,children:r.jsxs(C.Select,{id:`${d}-rol`,type:"text",label:p.UserModalRole,value:e.rol,onChange:s=>o("rol",s.target.value),errors:j.rol,showErrors:g,children:[!e.rol&&r.jsx(C.SelectOption,{value:p.UserModalRolePlaceHolder}),Object.values(q).map(s=>r.jsx(C.SelectOption,{value:s},s))]})}),r.jsxs("div",{className:z.row,children:[r.jsx("div",{"aria-labelledby":"technology-multiple-checkbox-label",className:M.dropdownLabel,children:p.UserModalTechnology}),r.jsx(ge,{id:`${d}-technology`,open:u,onClose:()=>b(!1),onTogglePopover:()=>b(s=>!s),value:m,errors:j.technologies,showErrors:g,testId:"technology-select",placeholder:p.ProjectModalFormDatabasePlaceholder,label:p.UserModalTechnology,children:r.jsx("div",{className:M.dropdown,role:"combobox","aria-expanded":u,"aria-haspopup":"listbox",id:`${d}-technology-multiple-checkbox`,children:r.jsxs("ul",{className:M.dropdownOptions,children:[r.jsx("li",{className:`${M.dropdownOption} ${M.disabled}`,tabIndex:0,"data-value":p.ProjectModalFormDatabasePlaceholder,role:"option",children:r.jsx("em",{children:p.ProjectModalFormDatabasePlaceholder})}),U.map((s,x)=>r.jsx("li",{tabIndex:-1,role:"option","data-value":s,"aria-selected":m.indexOf(s)>-1,className:`${M.dropdownOption} ${m.indexOf(s)>-1?M.selected:""}`,onClick:()=>l(s),children:s},`${x}-${s}`))]})})})]}),r.jsx("div",{className:z.row,children:r.jsxs(C.Select,{id:`${d}-division`,label:p.UserModalDivision,value:e.area,onChange:s=>o("area",s.target.value),errors:j.division,showErrors:g,children:[!e.area&&r.jsx(C.SelectOption,{value:p.UserModalDivisionPlaceHolder}),Object.values(W).map(s=>r.jsx(C.SelectOption,{value:s},s))]})}),r.jsx("div",{className:z.modalFormFooter,children:r.jsx(G.Footer,{onSubmit:S,onCancel:y,showCancel:!0,cancelText:p.AddProjectModalCancel,submitText:p.AddProjectModalSubmit})})]})},D={id:"",name:"",lastName:"",urlPhoto:"",rol:"",list:"",area:""},J=e=>({name:V(e.name),lastName:V(e.lastName),urlPhoto:e.urlPhoto,rol:gr(e.rol),list:fr(e.list),area:vr(e.area)}),fr=e=>e.split("|").map(t=>t.trim()).join("|"),V=e=>e.trim().split(" ").map(o=>`${o.charAt(0).toUpperCase()}${o.slice(1)}`).join(" "),Sr=e=>({id:`${e.id}`,name:e.name,lastName:e.lastName,urlPhoto:e.urlPhoto,list:e.list,rol:H(`${e.rol}`),area:xr(e.area)}),wr=e=>({...J(e),id:Number(e.id)}),Ur=e=>e.split("|"),K=({open:e,title:t,userId:o,onClose:c,OnSubmit:n})=>{const l=i.useId(),[d,u]=i.useState(D),[b,g]=i.useState([]),[f,m]=i.useState(!1),U=`header-${l}`,w=(y,s)=>{u(x=>({...x,[y]:s}))},j=y=>{if(b.indexOf(y)>-1){const x=b.filter(O=>O!==y);g(x)}else g(x=>[...x,y])},S=()=>{c(),u(D),g([])};return i.useEffect(()=>{o&&(async s=>{m(!0);try{const x=await oe(s);u(Sr(x)),g(Ur(x.list))}catch{console.log("loadUserData-Error")}m(!1)})(o)},[o]),r.jsxs(r.Fragment,{children:[r.jsxs(G,{open:e,ariaLabelledBy:U,onClose:S,allowEscape:!0,children:[r.jsx(G.Header,{title:t,onClose:S,showIconCloseText:!1,showCloseButton:!0}),r.jsx("div",{className:hr.modalForm,children:r.jsx(jr,{userFields:d,onUserFormChange:w,onSubmit:n,onClose:S,tecnologiesFields:b,onTechnologyChange:j})})]}),r.jsx(R,{show:f,text:"...Loading User"})]})},Nr=({open:e,updateGrid:t,onClose:o})=>{const[c,n]=i.useState(!1),l=async(d,u)=>{if(d){n(!0);try{const b=J(u.userFormFields),g=await se(b);t(g),o()}catch{console.log("CreateUserModal-Error")}n(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(K,{open:e,title:p.CreateUserModalTitle,onClose:o,OnSubmit:l}),r.jsx(R,{show:c,text:"...Creating User"})]})},$r=({open:e,userId:t,updateGrid:o,onClose:c})=>{const[n,l]=i.useState(!1),d=async(u,b)=>{if(u){l(!0);try{const g=wr(b.userFormFields),f=await ae(g);o(f),c()}catch{console.log("UpdatedUserModal-Error")}l(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx(K,{open:e,title:p.UpdateUserModalTitle,onClose:c,OnSubmit:d,userId:t}),r.jsx(R,{show:n,text:"...Updating User"})]})},Cr=({isCreateUserModalOpen:e,closeCreateUserModal:t})=>{const[o,c]=i.useState(!1),[n,l]=i.useState([]),[d,u]=i.useState("id"),[b,g]=i.useState(!0),[f,m]=i.useState(!1),[U,w]=i.useState(),[j,S]=i.useState(),{headers:y,projectGridRowFormatter:s}=ur(),x=a=>a===d,O=a=>{x(a)?g(!b):(u(a),g(!1))},Q=a=>x(a)?h.activeSorter:h.sortable,L=d?ue(n,d,b,d==="name"?be:void 0):n,_=i.useCallback(async()=>{c(!0);try{const a=await ne();l(a)}catch{console.log("error")}c(!1)},[]),X=async a=>{try{await le(a),_()}catch{console.log("removeuser-Error")}},Y=a=>{w(a),m(!0)},B=a=>{const v=n.find($=>$.id===a.id);if(!v)return _();const N=n.filter($=>$.id!==v.id);N.push(a),l(N)},Z=()=>{w(void 0),m(!1)};return i.useEffect(()=>{_()},[_]),i.useEffect(()=>{(async()=>{try{const v=await he();S(v)}catch{console.log("GetProjects-error")}})()},[]),r.jsxs("div",{className:A.userGrid,children:[r.jsxs("div",{className:h.table,children:[r.jsx("div",{className:`${h.thead} ${A.theadBottom} ${A.theadLabel}`,children:r.jsxs("div",{className:h.tr,children:[y.map(({name:a,label:v,isSortable:N,style:$})=>r.jsxs("div",{className:`${Q(a)}`,style:$,onClick:()=>N?O(a):void 0,"data-qa":`${a}-sort-button`,children:[r.jsx("span",{children:v}),N&&r.jsx(E,{icon:me(x(a),!b)})]},a)),r.jsx("div",{style:{minWidth:"150px"},"data-qa":"projects-sort-button",children:r.jsx("span",{children:"Proyectos"})},"projects"),r.jsx("div",{className:h.headingActions,style:{width:100}})]})}),L.length===0&&!o&&r.jsx("div",{className:h.noResultsMessage,children:"No Results Were Found"}),r.jsx("div",{className:A.tableBody,children:L.map(a=>r.jsxs(k,{row:a,getKey:v=>`${v.id}-user`,children:[y.map(({name:v,style:N,rowFormatter:$})=>$?r.jsx(k.CustomRowValue,{style:N,children:$(a,v)},v):r.jsx(k.Row,{value:a[v],style:N},v)),r.jsx(k.Row,{value:s(a,j),style:{minWidth:"150px"}}),r.jsx(k.Actions,{onEdit:()=>Y(a.id),onDelete:()=>X(a.id)})]},`${a.id}-grid-row`))})]}),r.jsx(R,{show:o,text:"...Loading Users"}),r.jsx(Nr,{open:e,updateGrid:B,onClose:t}),r.jsx($r,{userId:U,open:f,updateGrid:B,onClose:Z})]})},Pr=()=>{const[e,t]=i.useState(!1);return i.useEffect(()=>{document.title="OLS user"},[]),r.jsx("div",{className:F.container,children:r.jsx("div",{className:`${F.fullRow} ${F.stretchCard}`,children:r.jsxs(T,{width:"100%",children:[r.jsx(T.Header,{title:p.UserPageTitle}),r.jsx("div",{className:F.addActionGroup,children:r.jsx("button",{type:"submit",onClick:()=>t(!0),children:p.UserPageAddButton})}),r.jsx("div",{className:F.tableGridResponsive,children:r.jsx(Cr,{isCreateUserModalOpen:e,closeCreateUserModal:()=>t(!1)})})]})})})};export{Pr as default};
